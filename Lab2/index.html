<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>Lab 2</title>

	<style>
        .image-container {
            display: inline-block;
            width: 30%;
            margin-right: 1.5%;
            vertical-align: top;
        }

        .image-container img {
            width: 50%;
            height: auto;
        }
    	</style>
	
	</head>

	<body>

		<h1>Laborat√≥rio 2 - Calibra√ß√£o de Cameras</h1>

			<p>Lucas Daniel dos Santos RA: 11063416</p>
			<p>Paulo Henrique Eiji Hayashida RA: 11104714</p>
			<p>Victor Giovanetti Monteiro RA: 11201722116</p>

			<p>Data de realiza√ß√£o do experimento: 02/07/24</p>
			<p>Data de Publica√ß√£o: */07/24</p>

			<h2>Introdu√ß√£o</h2>

				<p>Neste laborat√≥rio conseguimos ver alguns dos efeitos que c√¢meras est√£o sujeitas, principalmente por possu√≠rem elementos como lentes e orienta√ß√£o espacial. Sendo assim a calibra√ß√£o √© um passo importante para retirar distor√ß√µes na imagens exibidas. Atrav√©s de c√≥digos em Python e a biblioteca Opencv possibilitam que esse ajuste.</p>
		
			<h2>Parte 1</h2>

				<p>Para a primeira etapa foram disponibilizados 3 links referentes a documenta√ß√µes contendo excplica√ß√µes te√≥ricas sobre tratamento de imagem.</p>
		
				<p>Link 1: https://learnopencv.com/geometry-of-image-formation/</p>

				<p>Para transformar objetos capturados por uma c√¢mera em imagens 2D, √© necess√°rio converter as coordenadas desses objetos para as coordenadas dos pixels correspondentes na imagem. Para isso, utilizam-se tr√™s sistemas de coordenadas. O primeiro sistema de coordenadas √© o sistema de coordenadas do mundo, que indica a posi√ß√£o dos objetos e da c√¢mera no espa√ßo tridimensional. O segundo sistema √© o sistema de coordenadas da c√¢mera, que referencia a transla√ß√£o e rota√ß√£o do objeto em rela√ß√£o √† c√¢mera. O terceiro sistema faz a proje√ß√£o do objeto e leva em considera√ß√£o as propriedades das lentes, corrigindo as distor√ß√µes naturais.</p>
				<p>Assim, supondo que a c√¢mera esteja em uma posi√ß√£o arbitr√°ria, representada por um vetor de transla√ß√£o 3x1,t, e uma orienta√ß√£o arbitr√°ria, representada por uma matriz de rota√ß√£o 3x3, R. Ao combinar essas matrizes em uma √∫nica matriz 3x4, chamada de matriz extr√≠nseca [R‚à£t], podemos transformar as coordenadas dos objetos do espa√ßo 3D para o sistema de coordenadas da c√¢mera</p>
				<p>Para uma c√¢mera pinhole, a imagem projetada √© invertida em 180¬∫ no plano da imagem. No entanto, por conveni√™ncia, assumimos que a imagem est√° projetada na frente do centro √≥ptico. Utilizando geometria b√°sica, a proje√ß√£o da imagem √© dada por x = f*Xc/Zc e y = f*Yc/Zc, onde f √© o ponto focal da c√¢mera, Xc, Yc e Zc s√£o as coordenadas no espa√ßo da c√¢mera, e x e y as coordenadas projetadas. Reescrevendo isso em forma matricial, obtemos a matriz intr√≠nseca, que inclui os par√¢metros intr√≠nsecos da c√¢mera.</p>

				<p>Link 2: https://learnopencv.com/camera-calibration-using-opencv/</p>

				<p>A calibra√ß√£o da c√¢mera √© o processo de estimar os par√¢metros de uma c√¢mera. Isso envolve obter todas as informa√ß√µes necess√°rias (par√¢metros ou coeficientes) sobre a c√¢mera para determinar a rela√ß√£o precisa entre um ponto 3D no mundo real e sua proje√ß√£o 2D na imagem capturada por essa c√¢mera. Geralmente, isso significa recuperar dois tipos de par√¢metros: os par√¢metros internos do sistema c√¢mera/lente, como a dist√¢ncia focal, o centro √≥ptico e os coeficientes de distor√ß√£o radial da lente; e os par√¢metros externos, que se referem √† orienta√ß√£o (rota√ß√£o e transla√ß√£o) da c√¢mera em rela√ß√£o a algum sistema de coordenadas do mundo.</p>
				<p>O objetivo do processo de calibra√ß√£o √© encontrar os valores dos par√¢metros intr√≠nsecos e extr√≠nsecos. Sendo elas matriz intr√≠nseca 3√ó3 ùêæ, a matriz de rota√ß√£o 3√ó3 R e o vetor de transla√ß√£o 3√ó1 t. Usando um conjunto de pontos 3D conhecidos  e suas coordenadas de imagem correspondentes. A calibra√ß√£o pode ser feita de diferentes formas, tais como padr√£o de calibra√ß√£o, quando se tem algum padr√£o como xadrez ou padr√µes circulares com tamanhos conhecidos; pistas geom√©tricas, por meio de linhas retas e pontos de fuga; e baseada em Deep Learning.</p>
				<p>O processo de calibra√ß√£o da c√¢mera come√ßa com a defini√ß√£o das coordenadas do mundo real usando um padr√£o de tabuleiro de xadrez com dimens√µes conhecidas. Esse padr√£o √© fotografado de diferentes orienta√ß√µes para capturar os cantos dos quadrados, que s√£o usados para definir um sistema de coordenadas do mundo onde todos os pontos est√£o no plano XY com Z = 0. O padr√£o de tabuleiro de xadrez √© amplamente utilizado devido √† sua facilidade de detec√ß√£o e √† clareza dos gradientes nos cantos dos quadrados. Em seguida, √© necess√°rio localizar os cantos dos quadrados usando a fun√ß√£o cv2.findChessboardCorners(). Para melhorar a precis√£o, pode-se utilizar a fun√ß√£o cv2.cornerSubPix(). Por fim, a fun√ß√£o cv2.calibrateCamera() utiliza os par√¢metros obtidos nos passos anteriores para calibrar a c√¢mera.

</p>

				<p>Link 3: https://docs.opencv.org/4.x/dc/dbb/tutorial_py_calibration.html</p>

				<p></p>

			<h2>Parte 2</h2>

				<p>Nessa etapa faremos a calica√ß√£o da c√¢mera baseado no "Link 2" e utilizando o arquivo L2_cal.py</p>
				<p>Para isso √© necess√°rio que tenhamos conhecimento dos parametros utilizados pela c√¢mera, para que possamos transformar as imagens de 3D para os pixels em 2D.</p>
				<p>Esses parametros s√£o divididos em duas partes, internos e externos.</p>

				<h3>a) </h3>

				<p>Para resolu√ß√£o do item acima foi necess√°rio apontar a variavel img para os arquivos de amostras.</p>
		

		
				<h3>b) </h3>

				<p>Caminho dos arquivos da parte 2: ./grupo-samples/</p>
				<p></p>Arquivo alterado para execu√ß√£o do item B, utilizando a nossa imagem do tabuleiro.</p>

				

				<h3>c) </h3>

				<p>Para esta etapa foram utilizadas imagens capturadas pela c√¢mera do celular com uma resolu√ß√£o bem maior do que a utilizada anteriormente.</p>


			




			<h2>An√°lise e Discuss√£o</h2>


			<h2>Conclus√µes</h2>

			
			<h2>Refer√™ncias</h2>


	</body>

</html>

